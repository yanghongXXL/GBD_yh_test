<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>第 1 章 Base_R基础 | GBD 笔记总结</title>
<meta name="author" content="杨 弘">
<meta name="description" content="1.1 基础拾遗 窗口可以通过拖动分割柱移动，也可以使用快捷键控制。比如：Ctrl+shift+1(2\3\4) 创建一个R脚本 ——Ctrl+shift+N 快速注释——Ctrl+shift+C 善于利用小标题实现功能分区（ctrl+shift+r） ctrl+alt+r ——快速插入代码框 注释（Ctrl+shift+c）； # ； 赋值（Alt+-）： =, &lt;- ; 函数的标志：...">
<meta name="generator" content="bookdown 0.29 with bs4_book()">
<meta property="og:title" content="第 1 章 Base_R基础 | GBD 笔记总结">
<meta property="og:type" content="book">
<meta property="og:url" content="https://yanghongxxl.github.io/GBD_learning/base_r基础.html">
<meta property="og:description" content="1.1 基础拾遗 窗口可以通过拖动分割柱移动，也可以使用快捷键控制。比如：Ctrl+shift+1(2\3\4) 创建一个R脚本 ——Ctrl+shift+N 快速注释——Ctrl+shift+C 善于利用小标题实现功能分区（ctrl+shift+r） ctrl+alt+r ——快速插入代码框 注释（Ctrl+shift+c）； # ； 赋值（Alt+-）： =, &lt;- ; 函数的标志：...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="第 1 章 Base_R基础 | GBD 笔记总结">
<meta name="twitter:description" content="1.1 基础拾遗 窗口可以通过拖动分割柱移动，也可以使用快捷键控制。比如：Ctrl+shift+1(2\3\4) 创建一个R脚本 ——Ctrl+shift+N 快速注释——Ctrl+shift+C 善于利用小标题实现功能分区（ctrl+shift+r） ctrl+alt+r ——快速插入代码框 注释（Ctrl+shift+c）； # ； 赋值（Alt+-）： =, &lt;- ; 函数的标志：...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.1/transition.js"></script><script src="libs/bs3compat-0.4.1/tabs.js"></script><script src="libs/bs3compat-0.4.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">GBD 笔记总结</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">前言</a></li>
<li><a class="active" href="base_r%E5%9F%BA%E7%A1%80.html"><span class="header-section-number">1</span> Base_R基础</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/yanghongXXL/GBD_learning">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="base_r基础" class="section level1" number="1">
<h1>
<span class="header-section-number">第 1 章</span> Base_R基础<a class="anchor" aria-label="anchor" href="#base_r%E5%9F%BA%E7%A1%80"><i class="fas fa-link"></i></a>
</h1>
<div id="基础拾遗" class="section level2" number="1.1">
<h2>
<span class="header-section-number">1.1</span> 基础拾遗<a class="anchor" aria-label="anchor" href="#%E5%9F%BA%E7%A1%80%E6%8B%BE%E9%81%97"><i class="fas fa-link"></i></a>
</h2>
<ol style="list-style-type: decimal">
<li><p>窗口可以通过拖动分割柱移动，也可以使用快捷键控制。比如：<strong>Ctrl+shift+1</strong>(2\3\4)</p></li>
<li><p>创建一个R脚本 ——<strong>Ctrl+shift+N</strong></p></li>
<li><p>快速注释——<strong>Ctrl+shift+C</strong></p></li>
<li><p>善于利用小标题实现功能分区（<strong>ctrl+shift+r</strong>）</p></li>
<li><p><strong>ctrl+alt+r</strong> ——快速插入代码框</p></li>
<li><p>注释（Ctrl+shift+c）； # ；</p></li>
<li><p>赋值（Alt+-）： =, &lt;- ;</p></li>
<li><p>函数的标志： ();</p></li>
<li><p>变量索引： $;</p></li>
<li><p>管道操作符： %&gt;%， |&gt;：读作 “然后” ;</p></li>
<li><p>比较或判断： &gt;, &lt; , &gt;=, &lt;=, ==, != ；</p></li>
<li><p>逻辑运算： &amp;(与), |(或), !(非) ;</p></li>
<li><p>算数运算： +， -， *， /, ^, %%(取余), %/%(整除)。</p></li>
</ol>
</div>
<div id="数据基本操作" class="section level2" number="1.2">
<h2>
<span class="header-section-number">1.2</span> 数据基本操作<a class="anchor" aria-label="anchor" href="#%E6%95%B0%E6%8D%AE%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><i class="fas fa-link"></i></a>
</h2>
<div id="读取数据" class="section level3" number="1.2.1">
<h3>
<span class="header-section-number">1.2.1</span> 读取数据<a class="anchor" aria-label="anchor" href="#%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mydata</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/data.csv"</span><span class="op">)</span> <span class="co"># 读取数据</span></span>
<span><span class="co"># knitr::kable(mydata, align = "c")</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">mydata</span><span class="op">)</span> <span class="co"># 查看表头</span></span></code></pre></div>
<pre><code>##  [1] "measure"  "location" "sex"      "age"     
##  [5] "cause"    "metric"   "year"     "val"     
##  [9] "upper"    "lower"</code></pre>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">mydata</span><span class="op">)</span> <span class="co"># 查看数据结构</span></span></code></pre></div>
<pre><code>## spc_tbl_ [900 × 10] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
##  $ measure : chr [1:900] "Prevalence" "Prevalence" "Prevalence" "Prevalence" ...
##  $ location: chr [1:900] "Global" "Global" "Global" "Global" ...
##  $ sex     : chr [1:900] "Male" "Female" "Both" "Male" ...
##  $ age     : chr [1:900] "All ages" "All ages" "All ages" "All ages" ...
##  $ cause   : chr [1:900] "HIV/AIDS" "HIV/AIDS" "HIV/AIDS" "HIV/AIDS" ...
##  $ metric  : chr [1:900] "Number" "Number" "Number" "Percent" ...
##  $ year    : num [1:900] 1990 1990 1990 1990 1990 1990 1990 1990 1990 1990 ...
##  $ val     : num [1:900] 3.87e+06 3.96e+06 7.83e+06 1.50e-03 1.53e-03 ...
##  $ upper   : num [1:900] 4.40e+06 4.55e+06 8.85e+06 1.71e-03 1.76e-03 ...
##  $ lower   : num [1:900] 3.35e+06 3.40e+06 6.88e+06 1.30e-03 1.32e-03 ...
##  - attr(*, "spec")=
##   .. cols(
##   ..   measure = col_character(),
##   ..   location = col_character(),
##   ..   sex = col_character(),
##   ..   age = col_character(),
##   ..   cause = col_character(),
##   ..   metric = col_character(),
##   ..   year = col_double(),
##   ..   val = col_double(),
##   ..   upper = col_double(),
##   ..   lower = col_double()
##   .. )
##  - attr(*, "problems")=&lt;externalptr&gt;</code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">mydata</span><span class="op">$</span><span class="va">cause</span><span class="op">)</span> <span class="co"># 查看分类变量的取值（唯一值）</span></span></code></pre></div>
<pre><code>## [1] "HIV/AIDS"                                     
## [2] "Sexually transmitted infections excluding HIV"</code></pre>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 其他查看数据的函数</span></span>
<span><span class="co"># summary(mydata)</span></span>
<span><span class="co"># head(mydata)</span></span>
<span><span class="co"># tail(mydata)</span></span></code></pre></div>
</div>
<div id="选择数据" class="section level3" number="1.2.2">
<h3>
<span class="header-section-number">1.2.2</span> 选择数据<a class="anchor" aria-label="anchor" href="#%E9%80%89%E6%8B%A9%E6%95%B0%E6%8D%AE"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mydata2</span> <span class="op">&lt;-</span> <span class="va">mydata</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">cause</span> <span class="op">==</span> <span class="st">"HIV/AIDS"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2019</span><span class="op">)</span></span>
<span><span class="va">mydata2</span></span></code></pre></div>
<pre><code>## # A tibble: 15 × 10
##   measure    location sex    age     cause metric  year
##   &lt;chr&gt;      &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt;
## 1 Prevalence Global   Male   All ag… HIV/… Number  2019
## 2 Prevalence Global   Female All ag… HIV/… Number  2019
## 3 Prevalence Global   Both   All ag… HIV/… Number  2019
## 4 Prevalence Global   Male   All ag… HIV/… Perce…  2019
## 5 Prevalence Global   Female All ag… HIV/… Perce…  2019
## 6 Prevalence Global   Both   All ag… HIV/… Perce…  2019
## # … with 9 more rows, and 3 more variables: val &lt;dbl&gt;,
## #   upper &lt;dbl&gt;, lower &lt;dbl&gt;</code></pre>
<p>这里面出现了管道操作符号” |&gt; “, 这个符号读作：然后。所以这个语句的意思是：首先，选中 mydata，然后，选择 cause 为”HIV/AIDS” 的行，然后，选择年份为 2019 年的行，最后，将选择好的数据赋值给 mydata2。</p>
<p>特别注意： = 是赋值符， == 为判断符。</p>
</div>
<div id="保存数据" class="section level3" number="1.2.3">
<h3>
<span class="header-section-number">1.2.3</span> 保存数据<a class="anchor" aria-label="anchor" href="#%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html">write.csv</a></span><span class="op">(</span><span class="va">mydata2</span>, <span class="co"># 将 mydata2 这个数据</span></span>
<span>          <span class="st">"HIV.csv"</span><span class="op">)</span> <span class="co"># 保存为 HIV.csv 文件</span></span></code></pre></div>
</div>
</div>
<div id="数据类型与数据结构" class="section level2" number="1.3">
<h2>
<span class="header-section-number">1.3</span> 数据类型与数据结构<a class="anchor" aria-label="anchor" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><i class="fas fa-link"></i></a>
</h2>
<div id="常见的数据类型" class="section level3" number="1.3.1">
<h3>
<span class="header-section-number">1.3.1</span> 常见的数据类型<a class="anchor" aria-label="anchor" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><i class="fas fa-link"></i></a>
</h3>
<p>R 语言常见数据类型有：数值类型（numeric），字符串（character），逻辑（logical），其他： POSIXct,POSIXt 等。</p>
<ul>
<li>数值类型： 1， 2， 3， 4.5,3.8;</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "numeric"</code></pre>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/typeof.html">typeof</a></span><span class="op">(</span><span class="fl">4.5</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "double"</code></pre>
<ul>
<li>字符串类型：“字符”， “123”， “ASIR”， “HIV”</li>
</ul>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="st">"123"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "character"</code></pre>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/typeof.html">typeof</a></span><span class="op">(</span><span class="st">"ASIR"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "character"</code></pre>
<ul>
<li>逻辑： TRUE， FALSE, T, F;</li>
</ul>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="cn">T</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "logical"</code></pre>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/typeof.html">typeof</a></span><span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "logical"</code></pre>
</div>
<div id="特殊数据类型-naninf-na-null" class="section level3" number="1.3.2">
<h3>
<span class="header-section-number">1.3.2</span> 特殊数据类型： NaN,Inf， NA， NULL<a class="anchor" aria-label="anchor" href="#%E7%89%B9%E6%AE%8A%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-naninf-na-null"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li><p>NaN:Not a number, 计算出错时候出现，比如 0/0,Inf/Inf</p></li>
<li><p>Inf : 无穷</p></li>
<li><p>NA：not availabel，缺失值。 NA 值具有传染性，任何数值与之发生关系均会变为 NA</p></li>
<li><p>NULL：空值。空值与 NA 的区别：比如一个教室稀稀拉拉坐了十几个学生，那么没有学生的位置可以视为缺失，而空值表示连座位也没有。</p></li>
</ul>
</div>
<div id="数据类型的转换-as.type" class="section level3" number="1.3.3">
<h3>
<span class="header-section-number">1.3.3</span> 数据类型的转换 as.type()<a class="anchor" aria-label="anchor" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%BD%AC%E6%8D%A2-as.type"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>numeric 与 logical 可以转化为 character，而 character 转化为 numeric 或者 logical 有可能出错，产生 NA 值。</li>
</ul>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="fl">1990</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "character"</code></pre>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="st">"1990"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "numeric"</code></pre>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">c</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="st">"ABC"</span><span class="op">)</span></span>
<span><span class="co">## Warning: 强制改变过程中产生了NA</span></span>
<span><span class="va">c</span></span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<ul>
<li>logical 可以转化为数值 0/1, 而在进行逻辑判断的时候， 0/1 也会被认为是 F/T</li>
</ul>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/logical.html">as.logical</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="数据结构" class="section level3" number="1.3.4">
<h3>
<span class="header-section-number">1.3.4</span> 数据结构<a class="anchor" aria-label="anchor" href="#%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>标量</li>
</ul>
<p>单个元素组成的数据结构，比如”A”,123,TRUE 等。</p>
<p>### 向量</p>
<p>多个标量组成的一维的数据结构，比如 Vector。</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 生成向量</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1990</span><span class="op">:</span><span class="fl">2019</span><span class="op">)</span></span>
<span><span class="va">a</span></span></code></pre></div>
<pre><code>##  [1] 1990 1991 1992 1993 1994 1995 1996 1997 1998 1999
## [11] 2000 2001 2002 2003 2004 2005 2006 2007 2008 2009
## [21] 2010 2011 2012 2013 2014 2015 2016 2017 2018 2019</code></pre>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span>,<span class="fl">5</span>,<span class="fl">6</span><span class="op">)</span></span>
<span><span class="va">b</span></span></code></pre></div>
<pre><code>## [1] 1 2 3 4 5 6</code></pre>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">c</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"A"</span>,<span class="fl">3</span><span class="op">)</span> <span class="co">#repeat 前三个字母</span></span>
<span><span class="va">c</span></span></code></pre></div>
<pre><code>## [1] "A" "A" "A"</code></pre>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span>from<span class="op">=</span><span class="fl">1</span>,to<span class="op">=</span><span class="fl">10</span>,by<span class="op">=</span><span class="fl">2</span><span class="op">)</span> <span class="co">#sequence 前三个字母</span></span>
<span><span class="va">d</span></span></code></pre></div>
<pre><code>## [1] 1 3 5 7 9</code></pre>
<ul>
<li><p>矩阵 (matrix)，数据框 (data.frame)， tipple</p></li>
<li><p>列表 (list) 与数组 (array)</p></li>
</ul>
</div>
</div>
<div id="作业" class="section level2" number="1.4">
<h2>
<span class="header-section-number">1.4</span> 作业<a class="anchor" aria-label="anchor" href="#%E4%BD%9C%E4%B8%9A"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>查看 data.csv 数据, 说出这个数据的性别有多少种？</li>
</ul>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/data.csv"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">sex</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "Male"   "Female" "Both"</code></pre>
<ul>
<li>从 data.csv 文档选择年龄标准化 患病率数据。</li>
</ul>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">age</span> <span class="op">==</span> <span class="st">"Age-standardized"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">metric</span> <span class="op">==</span> <span class="st">"Rate"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## # A tibble: 180 × 10
##   measure locat…¹ sex   age   cause metric  year    val
##   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 Preval… Global  Male  Age-… HIV/… Rate    1990   148.
## 2 Preval… Global  Fema… Age-… HIV/… Rate    1990   147.
## 3 Preval… Global  Both  Age-… HIV/… Rate    1990   147.
## 4 Preval… Global  Male  Age-… Sexu… Rate    1990 11293.
## 5 Preval… Global  Fema… Age-… Sexu… Rate    1990 19439.
## 6 Preval… Global  Both  Age-… Sexu… Rate    1990 15387.
## # … with 174 more rows, 2 more variables: upper &lt;dbl&gt;,
## #   lower &lt;dbl&gt;, and abbreviated variable name
## #   ¹​location</code></pre>
<ul>
<li>从 data.csv 文档选择患病人数数据。</li>
</ul>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">metric</span> <span class="op">==</span> <span class="st">"Number"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## # A tibble: 180 × 10
##   measure locat…¹ sex   age   cause metric  year    val
##   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 Preval… Global  Male  All … HIV/… Number  1990 3.87e6
## 2 Preval… Global  Fema… All … HIV/… Number  1990 3.96e6
## 3 Preval… Global  Both  All … HIV/… Number  1990 7.83e6
## 4 Preval… Global  Male  All … Sexu… Number  1990 2.71e8
## 5 Preval… Global  Fema… All … Sexu… Number  1990 4.74e8
## 6 Preval… Global  Both  All … Sexu… Number  1990 7.46e8
## # … with 174 more rows, 2 more variables: upper &lt;dbl&gt;,
## #   lower &lt;dbl&gt;, and abbreviated variable name
## #   ¹​location</code></pre>
<ul>
<li>从 data.csv 文档中选择 1990 到 2010 年艾滋病的女性患病率数据，并写出为 HIV_female.csv 文档。</li>
</ul>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1990</span><span class="op">:</span><span class="fl">2010</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">sex</span> <span class="op">==</span> <span class="st">"Female"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">cause</span> <span class="op">==</span> <span class="st">"HIV/AIDS"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">metric</span> <span class="op">==</span> <span class="st">"Rate"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">write_csv</span><span class="op">(</span><span class="st">"data/HIV_female.csv"</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>从 data.csv 文档中选择 1990,1995,2000,2005,2010,2015年男性、女性其他传染性疾病患病率数据，并写出为 nonHIV.csv 文档</li>
</ul>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1990</span>,<span class="fl">1995</span>, <span class="fl">2000</span>, <span class="fl">2005</span>, <span class="fl">2010</span>, <span class="fl">2015</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">cause</span> <span class="op">!=</span> <span class="st">"HIV/AIDS"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">metric</span> <span class="op">==</span> <span class="st">"Rate"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">write_csv</span><span class="op">(</span><span class="st">"data/nonHIV.csv"</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="函数" class="section level2" number="1.5">
<h2>
<span class="header-section-number">1.5</span> 函数<a class="anchor" aria-label="anchor" href="#%E5%87%BD%E6%95%B0"><i class="fas fa-link"></i></a>
</h2>
<div id="函数的结构" class="section level3" number="1.5.1">
<h3>
<span class="header-section-number">1.5.1</span> 函数的结构<a class="anchor" aria-label="anchor" href="#%E5%87%BD%E6%95%B0%E7%9A%84%E7%BB%93%E6%9E%84"><i class="fas fa-link"></i></a>
</h3>
<p>R 语言函数一般由三个部分构成：函数体（body），参数（formals） , 环境（environment）。可以通过相应的函数查看函数的相应部分。以常见的 “粘贴” 函数 paste() 为例：</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># paste() 函数可以将两个向量对应的元素粘贴在一起。</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>,<span class="st">"B"</span>,<span class="st">"C"</span><span class="op">)</span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">c</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">a</span>,<span class="va">b</span>,sep <span class="op">=</span> <span class="st">":"</span>,collapse <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="va">c</span></span></code></pre></div>
<pre><code>## [1] "A:1" "B:2" "C:3"</code></pre>
<p>我们分别使用 body， formals, environment 函数查看 paste() 函数的相应部分。</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 查看函数结构</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/body.html">body</a></span><span class="op">(</span><span class="va">paste</span><span class="op">)</span></span></code></pre></div>
<pre><code>## .Internal(paste(list(...), sep, collapse, recycle0))</code></pre>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 查看函数参数</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/formals.html">formals</a></span><span class="op">(</span><span class="va">paste</span><span class="op">)</span></span></code></pre></div>
<pre><code>## $...
## 
## 
## $sep
## [1] " "
## 
## $collapse
## NULL
## 
## $recycle0
## [1] FALSE</code></pre>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 查看函数来自哪个包</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/environment.html">environment</a></span><span class="op">(</span><span class="va">paste</span><span class="op">)</span></span></code></pre></div>
<pre><code>## &lt;environment: namespace:base&gt;</code></pre>
</div>
<div id="函数的功能" class="section level3" number="1.5.2">
<h3>
<span class="header-section-number">1.5.2</span> 函数的功能<a class="anchor" aria-label="anchor" href="#%E5%87%BD%E6%95%B0%E7%9A%84%E5%8A%9F%E8%83%BD"><i class="fas fa-link"></i></a>
</h3>
<p>函数就像一个加工厂，可以将 “原料” 通过一系列转变，然后输出相应的 “产品”</p>
<div class="figure">
<img src="images/0101.png" fig-align="center" alt=""><p class="caption">函数展示</p>
</div>
<p>这里的输入，可以是某个值、向量、 data.frame，或者是其他类型的数据；</p>
<p>输出，可以是数据，文档，图片等等。</p>
</div>
<div id="函数的分类" class="section level3" number="1.5.3">
<h3>
<span class="header-section-number">1.5.3</span> 函数的分类<a class="anchor" aria-label="anchor" href="#%E5%87%BD%E6%95%B0%E7%9A%84%E5%88%86%E7%B1%BB"><i class="fas fa-link"></i></a>
</h3>
<p>R 语言的函数包括内置函数，外来函数（R 包），自编函数三大类。</p>
<ul>
<li>实用的内置函数</li>
</ul>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 查看R语言自带数据集</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># 描述性统计类</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cumsum.html">cumsum</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># 生成随机数</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span>n <span class="op">=</span> , min <span class="op">=</span> , max <span class="op">=</span> <span class="op">)</span> <span class="co"># uniform，生成 n 个服从均匀分布的小数</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span>n<span class="op">=</span>,min<span class="op">=</span>,max<span class="op">=</span><span class="op">)</span>,<span class="co"># round() 函数空值小数点的位数</span></span>
<span>      digits <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="co"># 生成 n 个服从均匀分布的整数</span></span></code></pre></div>
<ul>
<li>实用的外来函数（tidyverse）</li>
</ul>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 根据变量取值进行筛选</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># 选择变量</span></span>
<span><span class="fu">select</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># 生成变量</span></span>
<span><span class="fu">mutate</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># 排序</span></span>
<span><span class="fu">arrange</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># 分组统计</span></span>
<span><span class="fu">group_by</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>演示（使用R自带数据）</li>
</ul>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 加载数据</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"ToothGrowth"</span><span class="op">)</span></span>
<span><span class="co"># 查看表头</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">ToothGrowth</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "len"  "supp" "dose"</code></pre>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 查看数据结构</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">ToothGrowth</span><span class="op">)</span></span></code></pre></div>
<pre><code>## 'data.frame':    60 obs. of  3 variables:
##  $ len : num  4.2 11.5 7.3 5.8 6.4 10 11.2 11.2 5.2 7 ...
##  $ supp: Factor w/ 2 levels "OJ","VC": 2 2 2 2 2 2 2 2 2 2 ...
##  $ dose: num  0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 ...</code></pre>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 查看分组变量的取值</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">ToothGrowth</span><span class="op">$</span><span class="va">supp</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] VC OJ
## Levels: OJ VC</code></pre>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 生成变量（生成两个标签）</span></span>
<span><span class="va">ToothGrowth</span> <span class="op">&lt;-</span> <span class="va">ToothGrowth</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>剂量<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">dose</span><span class="op">==</span><span class="fl">0.5</span>,<span class="st">"0.5mg"</span>,</span>
<span>                   <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">dose</span><span class="op">==</span><span class="fl">1.0</span>,<span class="st">"1.0mg"</span>,<span class="st">"2.0mg"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>补充喂养<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">supp</span><span class="op">==</span><span class="st">"VC"</span>,<span class="st">" 维 C"</span>,<span class="st">" 橙汁"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 分组统计</span></span>
<span><span class="va">summary_data</span> <span class="op">&lt;-</span> <span class="va">ToothGrowth</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">补充喂养</span>, <span class="va">剂量</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span></span>
<span>    n<span class="op">=</span><span class="fu">n</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    mean<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">len</span><span class="op">)</span>,</span>
<span>    sd<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">len</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>自编函数</li>
</ul>
</div>
<div id="查看函数帮助" class="section level3" number="1.5.4">
<h3>
<span class="header-section-number">1.5.4</span> 查看函数帮助<a class="anchor" aria-label="anchor" href="#%E6%9F%A5%E7%9C%8B%E5%87%BD%E6%95%B0%E5%B8%AE%E5%8A%A9"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 如果知道具体的函数名字：</span></span>
<span><span class="op">?</span> <span class="co"># 查看函数的帮助，比如 ?filter</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/help.html">help</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># 同？</span></span>
<span><span class="op">?</span><span class="op">?</span> <span class="co"># 查看 R 包的帮助，比如??dplyr</span></span>
<span><span class="co"># 如果不知道具体的函数名字</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/apropos.html">apropos</a></span><span class="op">(</span><span class="st">"norm"</span><span class="op">)</span><span class="co"># apropos: 就... 而言</span></span></code></pre></div>
</div>
</div>
<div id="向量及其操作" class="section level2" number="1.6">
<h2>
<span class="header-section-number">1.6</span> 向量及其操作<a class="anchor" aria-label="anchor" href="#%E5%90%91%E9%87%8F%E5%8F%8A%E5%85%B6%E6%93%8D%E4%BD%9C"><i class="fas fa-link"></i></a>
</h2>
<p>向量为一系列标量的集合</p>
<div id="创建向量" class="section level3" number="1.6.1">
<h3>
<span class="header-section-number">1.6.1</span> 创建向量<a class="anchor" aria-label="anchor" href="#%E5%88%9B%E5%BB%BA%E5%90%91%E9%87%8F"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="向量的类型" class="section level3" number="1.6.2">
<h3>
<span class="header-section-number">1.6.2</span> 向量的类型<a class="anchor" aria-label="anchor" href="#%E5%90%91%E9%87%8F%E7%9A%84%E7%B1%BB%E5%9E%8B"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>字符串，数值， logical 类型</li>
</ul>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 字符串型：</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>,<span class="st">"A"</span>,<span class="st">"B"</span>,<span class="st">"B"</span>,<span class="st">"C"</span>,<span class="st">"C"</span><span class="op">)</span></span>
<span><span class="co"># 数值类型</span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="co"># logical 类型</span></span>
<span><span class="va">c</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">T</span>,<span class="cn">T</span>,<span class="cn">F</span>,<span class="cn">F</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>因子类型</li>
</ul>
<p>R 语言有一类非常重要的变量类型，名为因子（factor）。因子可以视为分类变量的特殊类型，它既有值，又对值进行了排序（levels）。</p>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 如何生成因子</span></span>
<span><span class="va">name1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">name2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">name1</span>,</span>
<span>                levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span>, <span class="co">#levels 必须与原始数据取值相同</span></span>
<span>                labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Male"</span>,<span class="st">"Female"</span>,<span class="st">"Both"</span><span class="op">)</span><span class="op">)</span> <span class="co">#labels 是为了</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">name1</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "numeric"</code></pre>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">name2</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "factor"</code></pre>
</div>
<div id="向量的运算" class="section level3" number="1.6.3">
<h3>
<span class="header-section-number">1.6.3</span> 向量的运算<a class="anchor" aria-label="anchor" href="#%E5%90%91%E9%87%8F%E7%9A%84%E8%BF%90%E7%AE%97"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 简单统计</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 10.5</code></pre>
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 算数运算</span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fl">2</span><span class="op">*</span><span class="va">a</span> <span class="co"># 标量与向量</span></span>
<span><span class="va">c</span> <span class="op">&lt;-</span> <span class="va">b</span><span class="op">+</span><span class="va">a</span> <span class="co"># 标量与向量</span></span></code></pre></div>
</div>
<div id="重要向量的循环补齐机制" class="section level3" number="1.6.4">
<h3>
<span class="header-section-number">1.6.4</span> 重要：向量的循环补齐机制<a class="anchor" aria-label="anchor" href="#%E9%87%8D%E8%A6%81%E5%90%91%E9%87%8F%E7%9A%84%E5%BE%AA%E7%8E%AF%E8%A1%A5%E9%BD%90%E6%9C%BA%E5%88%B6"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>,<span class="st">"B"</span>,<span class="st">"C"</span>,<span class="st">"D"</span>,<span class="st">"E"</span><span class="op">)</span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">c</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">a</span>,<span class="va">b</span>,sep <span class="op">=</span> <span class="st">":"</span><span class="op">)</span></span>
<span><span class="va">c</span></span></code></pre></div>
<pre><code>## [1] "A:1" "B:2" "C:3" "D:1" "E:2"</code></pre>
<div class="figure">
<img src="images/0102.png" fig-align="center" alt=""><p class="caption">循环补齐</p>
</div>
</div>
<div id="交并补" class="section level3" number="1.6.5">
<h3>
<span class="header-section-number">1.6.5</span> 交、并、补<a class="anchor" aria-label="anchor" href="#%E4%BA%A4%E5%B9%B6%E8%A1%A5"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 向量的交、并、补集，找不同，找相同，找不同（背熟）</span></span>
<span></span>
<span><span class="co"># 取交集</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">15</span><span class="op">)</span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span><span class="op">:</span><span class="fl">20</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sets.html">intersect</a></span><span class="op">(</span><span class="va">a</span>,<span class="va">b</span><span class="op">)</span> </span></code></pre></div>
<pre><code>## [1] 10 11 12 13 14 15</code></pre>
<div class="sourceCode" id="cb80"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 取并集</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sets.html">union</a></span><span class="op">(</span><span class="va">a</span>,<span class="va">b</span><span class="op">)</span></span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17
## [18] 18 19 20</code></pre>
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 找不同</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sets.html">setdiff</a></span><span class="op">(</span><span class="va">a</span>,<span class="va">b</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 1 2 3 4 5 6 7 8 9</code></pre>
<div class="sourceCode" id="cb84"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sets.html">setdiff</a></span><span class="op">(</span><span class="va">b</span>,<span class="va">a</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 16 17 18 19 20</code></pre>
<div class="sourceCode" id="cb86"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 去除重复</span></span>
<span><span class="va">aa</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"A"</span>,<span class="fl">3</span><span class="op">)</span>,<span class="fl">4</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">aa</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "A" "4" "5" "6"</code></pre>
</div>
<div id="向量的下标索引" class="section level3" number="1.6.6">
<h3>
<span class="header-section-number">1.6.6</span> 向量的下标索引 []<a class="anchor" aria-label="anchor" href="#%E5%90%91%E9%87%8F%E7%9A%84%E4%B8%8B%E6%A0%87%E7%B4%A2%E5%BC%95"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb88"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 已经知道向量 x</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">" 张三"</span>,<span class="st">" 小明"</span>,<span class="st">" 王五"</span>,<span class="st">" 李思齐"</span><span class="op">)</span></span>
<span><span class="co"># 如何选择李思齐？</span></span>
<span><span class="va">x</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span></span></code></pre></div>
<pre><code>## [1] " 李思齐"</code></pre>
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 如何同时选择小明与李思齐？</span></span>
<span><span class="va">x</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">4</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code>## [1] " 小明"   " 李思齐"</code></pre>
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 如何不选择张三</span></span>
<span><span class="va">x</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span></span></code></pre></div>
<pre><code>## [1] " 小明"   " 王五"   " 李思齐"</code></pre>
</div>
</div>
<div id="数据框及其操作" class="section level2" number="1.7">
<h2>
<span class="header-section-number">1.7</span> 数据框及其操作<a class="anchor" aria-label="anchor" href="#%E6%95%B0%E6%8D%AE%E6%A1%86%E5%8F%8A%E5%85%B6%E6%93%8D%E4%BD%9C"><i class="fas fa-link"></i></a>
</h2>
<p>数据框是 R 语言最常用的二维表。</p>
<div id="生成数据框" class="section level3" number="1.7.1">
<h3>
<span class="header-section-number">1.7.1</span> 生成数据框<a class="anchor" aria-label="anchor" href="#%E7%94%9F%E6%88%90%E6%95%B0%E6%8D%AE%E6%A1%86"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb94"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 通过 read.csv 函数等读取</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb95"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 通过向量组合生成</span></span>
<span><span class="va">age</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">20</span>,<span class="fl">30</span>,<span class="fl">18</span>,<span class="fl">26</span><span class="op">)</span></span>
<span><span class="va">name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">" 赵"</span>,<span class="st">" 钱"</span>,<span class="st">" 孙"</span>,<span class="st">" 李"</span><span class="op">)</span></span>
<span><span class="va">score</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">99</span>,<span class="fl">65</span>,<span class="fl">77</span>,<span class="fl">88</span><span class="op">)</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>age<span class="op">=</span><span class="va">age</span>,</span>
<span>                 name<span class="op">=</span><span class="va">name</span>,</span>
<span>                 score<span class="op">=</span><span class="va">score</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="数据框的下标索引" class="section level3" number="1.7.2">
<h3>
<span class="header-section-number">1.7.2</span> 数据框的下标索引 <span class="math display">\[ , \]</span><a class="anchor" aria-label="anchor" href="#%E6%95%B0%E6%8D%AE%E6%A1%86%E7%9A%84%E4%B8%8B%E6%A0%87%E7%B4%A2%E5%BC%95"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb96"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 数据框下标索引中间有逗号，逗号前表示行，逗号后表示列 [row,col]</span></span>
<span><span class="co"># 选择 df 前两列</span></span>
<span><span class="va">df</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span> <span class="co"># 空着表示全选</span></span></code></pre></div>
<pre><code>## [1] " 赵" " 钱" " 孙" " 李"</code></pre>
<div class="sourceCode" id="cb98"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span><span class="op">[</span><span class="fl">2</span>,<span class="op">]</span> <span class="co"># 选择 df 前两行</span></span></code></pre></div>
<pre><code>##   age name score
## 2  30   钱    65</code></pre>
<div class="sourceCode" id="cb100"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span><span class="op">[</span><span class="fl">2</span>,<span class="fl">2</span><span class="op">]</span> <span class="co"># 选择 df 第二行第二列</span></span></code></pre></div>
<pre><code>## [1] " 钱"</code></pre>
<div class="sourceCode" id="cb102"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span><span class="op">[</span><span class="op">-</span><span class="fl">3</span>,<span class="op">]</span> <span class="co"># 不选择第三行</span></span></code></pre></div>
<pre><code>##   age name score
## 1  20   赵    99
## 2  30   钱    65
## 4  26   李    88</code></pre>
<div class="sourceCode" id="cb104"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">3</span><span class="op">)</span>,<span class="fl">2</span><span class="op">]</span> <span class="co"># 选择 1， 3 行； 2 列</span></span></code></pre></div>
<pre><code>## [1] " 赵" " 孙"</code></pre>
<div class="sourceCode" id="cb106"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span><span class="op">[</span><span class="va">df</span><span class="op">$</span><span class="va">name</span><span class="op">==</span><span class="st">" 李"</span>,<span class="op">]</span> <span class="co"># 选择姓李的数据</span></span></code></pre></div>
<pre><code>##   age name score
## 4  26   李    88</code></pre>
</div>
<div id="数据框如何生成新的列" class="section level3" number="1.7.3">
<h3>
<span class="header-section-number">1.7.3</span> 数据框如何生成新的列<a class="anchor" aria-label="anchor" href="#%E6%95%B0%E6%8D%AE%E6%A1%86%E5%A6%82%E4%BD%95%E7%94%9F%E6%88%90%E6%96%B0%E7%9A%84%E5%88%97"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb108"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 比如生成身高数据</span></span>
<span><span class="va">height</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">178</span>,<span class="fl">180</span>,<span class="fl">169</span>,<span class="fl">175</span><span class="op">)</span></span>
<span><span class="va">df</span><span class="op">$</span><span class="va">height</span> <span class="op">&lt;-</span> <span class="va">height</span></span>
<span><span class="va">df</span></span></code></pre></div>
<pre><code>##   age name score height
## 1  20   赵    99    178
## 2  30   钱    65    180
## 3  18   孙    77    169
## 4  26   李    88    175</code></pre>
</div>
</div>
<div id="作业-1" class="section level2" number="1.8">
<h2>
<span class="header-section-number">1.8</span> 作业<a class="anchor" aria-label="anchor" href="#%E4%BD%9C%E4%B8%9A-1"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>查看函数帮助，说出 paste() 与 paste0() 的差别， sep 和 collapse 参数的作用。</li>
</ul>
<div class="sourceCode" id="cb110"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">paste</span></span>
<span><span class="op">?</span><span class="va">paste0</span></span>
<span><span class="co"># paste 比 paste0() 多了一个参数： sep</span></span></code></pre></div>
<p>sep 和 collapse 参数的作用:</p>
<div class="sourceCode" id="cb111"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 函数形式 paste (..., sep = " ", collapse =NULL)</span></span>
<span><span class="co"># 示例</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>,<span class="st">"B"</span>,<span class="st">"C"</span>,<span class="st">"D"</span><span class="op">)</span></span>
<span><span class="co"># sep 参数指定某个连接符，比如这里制定了下划线</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">a</span>,<span class="va">b</span>,sep <span class="op">=</span> <span class="st">"_"</span>,collapse <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "1_A" "2_B" "3_C" "4_D"</code></pre>
<div class="sourceCode" id="cb113"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># collapse 参数默认为 NULL，</span></span>
<span><span class="co"># 如果是其他值，向量就会坍缩成一个字符串标量</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">a</span>,<span class="va">b</span>,sep <span class="op">=</span> <span class="st">"_"</span>,collapse <span class="op">=</span> <span class="st">":"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "1_A:2_B:3_C:4_D"</code></pre>
<ul>
<li>加载 R 内置数据 ToothGrowth, 按照喂养方式与剂量分组统计不同组牙齿生长长度的均值，标准差，中位数，四分位间距，最小值，最大值，以及老鼠的个数。</li>
</ul>
<div class="sourceCode" id="cb115"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"ToothGrowth"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">ToothGrowth</span><span class="op">)</span></span></code></pre></div>
<pre><code>## 'data.frame':    60 obs. of  3 variables:
##  $ len : num  4.2 11.5 7.3 5.8 6.4 10 11.2 11.2 5.2 7 ...
##  $ supp: Factor w/ 2 levels "OJ","VC": 2 2 2 2 2 2 2 2 2 2 ...
##  $ dose: num  0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 ...</code></pre>
<div class="sourceCode" id="cb117"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 分组统计</span></span>
<span><span class="va">temp</span> <span class="op">&lt;-</span> <span class="va">ToothGrowth</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">supp</span>, <span class="va">dose</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>len_mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">len</span><span class="op">)</span>,</span>
<span>            len_sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">len</span><span class="op">)</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>            len_median <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">len</span><span class="op">)</span>,</span>
<span>            len_IQR_lower <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">len</span>, <span class="fl">0.25</span><span class="op">)</span>,</span>
<span>            len_IQR_upper <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">len</span>, <span class="fl">0.75</span><span class="op">)</span>,</span>
<span>            len_min <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">len</span><span class="op">)</span>,</span>
<span>            len_max <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">len</span><span class="op">)</span>,</span>
<span>            mice_number <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">temp</span><span class="op">)</span> <span class="co"># 展示数据</span></span></code></pre></div>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="5%">
<col width="5%">
<col width="9%">
<col width="7%">
<col width="11%">
<col width="15%">
<col width="15%">
<col width="8%">
<col width="8%">
<col width="12%">
</colgroup>
<thead><tr class="header">
<th align="left">supp</th>
<th align="right">dose</th>
<th align="right">len_mean</th>
<th align="right">len_sd</th>
<th align="right">len_median</th>
<th align="right">len_IQR_lower</th>
<th align="right">len_IQR_upper</th>
<th align="right">len_min</th>
<th align="right">len_max</th>
<th align="right">mice_number</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">OJ</td>
<td align="right">0.5</td>
<td align="right">13.23</td>
<td align="right">4.5</td>
<td align="right">12.25</td>
<td align="right">9.70</td>
<td align="right">16.18</td>
<td align="right">8.2</td>
<td align="right">21.5</td>
<td align="right">10</td>
</tr>
<tr class="even">
<td align="left">OJ</td>
<td align="right">1.0</td>
<td align="right">22.70</td>
<td align="right">3.9</td>
<td align="right">23.45</td>
<td align="right">20.30</td>
<td align="right">25.65</td>
<td align="right">14.5</td>
<td align="right">27.3</td>
<td align="right">10</td>
</tr>
<tr class="odd">
<td align="left">OJ</td>
<td align="right">2.0</td>
<td align="right">26.06</td>
<td align="right">2.7</td>
<td align="right">25.95</td>
<td align="right">24.57</td>
<td align="right">27.07</td>
<td align="right">22.4</td>
<td align="right">30.9</td>
<td align="right">10</td>
</tr>
<tr class="even">
<td align="left">VC</td>
<td align="right">0.5</td>
<td align="right">7.98</td>
<td align="right">2.7</td>
<td align="right">7.15</td>
<td align="right">5.95</td>
<td align="right">10.90</td>
<td align="right">4.2</td>
<td align="right">11.5</td>
<td align="right">10</td>
</tr>
<tr class="odd">
<td align="left">VC</td>
<td align="right">1.0</td>
<td align="right">16.77</td>
<td align="right">2.5</td>
<td align="right">16.50</td>
<td align="right">15.28</td>
<td align="right">17.30</td>
<td align="right">13.6</td>
<td align="right">22.5</td>
<td align="right">10</td>
</tr>
<tr class="even">
<td align="left">VC</td>
<td align="right">2.0</td>
<td align="right">26.14</td>
<td align="right">4.8</td>
<td align="right">25.95</td>
<td align="right">23.38</td>
<td align="right">28.80</td>
<td align="right">18.5</td>
<td align="right">33.9</td>
<td align="right">10</td>
</tr>
</tbody>
</table></div>
<ul>
<li>生成 1 到 100 范围差值为 5 的等差序列 a，生成 1 到一百万倍数为 10 的等比序列 b。</li>
</ul>
<div class="sourceCode" id="cb118"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 等差序列</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">1</span>, to <span class="op">=</span> <span class="fl">100</span>, by <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span><span class="va">a</span></span></code></pre></div>
<pre><code>##  [1]  1  6 11 16 21 26 31 36 41 46 51 56 61 66 71 76 81
## [18] 86 91 96</code></pre>
<div class="sourceCode" id="cb120"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 等比序列</span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fl">10</span><span class="op">^</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0</span>, to <span class="op">=</span> <span class="fl">6</span><span class="op">)</span></span>
<span><span class="va">b</span></span></code></pre></div>
<pre><code>## [1] 1e+00 1e+01 1e+02 1e+03 1e+04 1e+05 1e+06</code></pre>
<ul>
<li>已知向量 a=c(1:18),b=c(5:36), 用两种方法找到只存在 a,b 某一个向量中的所有元素。</li>
</ul>
<div class="sourceCode" id="cb122"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## 方法一 </span></span>
<span><span class="co"># duplicated() 函数判断一个向量每个元素是否重复，并生成一个逻辑向量</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">18</span><span class="op">)</span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span><span class="op">:</span><span class="fl">36</span><span class="op">)</span></span>
<span><span class="va">c</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">a</span>,<span class="va">b</span><span class="op">)</span><span class="co">#5:18 存在重复的元素</span></span>
<span><span class="va">c</span> <span class="op">&lt;-</span> <span class="va">c</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/duplicated.html">duplicated</a></span><span class="op">(</span><span class="va">c</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">c</span></span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17
## [18] 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34
## [35] 35 36</code></pre>
<div class="sourceCode" id="cb124"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## 方法二：使用 unique() 函数</span></span>
<span><span class="co"># unique() 函数可以直接去重</span></span>
<span><span class="va">a</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">18</span><span class="op">)</span></span>
<span><span class="va">b</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span><span class="op">:</span><span class="fl">36</span><span class="op">)</span></span>
<span><span class="va">c</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">a</span>,<span class="va">b</span><span class="op">)</span><span class="co">#5:18 存在重复的元素</span></span>
<span><span class="va">c</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">c</span><span class="op">)</span></span>
<span><span class="va">c</span></span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17
## [18] 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34
## [35] 35 36</code></pre>
<div class="sourceCode" id="cb126"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## 方法三：使用 setdiff() 函数：</span></span>
<span><span class="co"># setdiff() 函数可以找到 a 或 b 互为补充的部分</span></span>
<span><span class="va">a</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">18</span><span class="op">)</span></span>
<span><span class="va">b</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span><span class="op">:</span><span class="fl">36</span><span class="op">)</span></span>
<span><span class="co"># 1.</span></span>
<span><span class="va">c</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://generics.r-lib.org/reference/setops.html">setdiff</a></span><span class="op">(</span><span class="va">a</span>,<span class="va">b</span><span class="op">)</span></span>
<span><span class="va">c</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">c</span>,<span class="va">b</span><span class="op">)</span></span>
<span><span class="va">c</span></span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17
## [18] 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34
## [35] 35 36</code></pre>
<div class="sourceCode" id="cb128"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 2.</span></span>
<span><span class="va">c</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://generics.r-lib.org/reference/setops.html">setdiff</a></span><span class="op">(</span><span class="va">b</span>,<span class="va">a</span><span class="op">)</span></span>
<span><span class="va">c</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">a</span>,<span class="va">c</span><span class="op">)</span></span>
<span><span class="va">c</span></span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17
## [18] 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34
## [35] 35 36</code></pre>
<ul>
<li>将 data.csv 的年龄，年份都设置为因子。</li>
</ul>
<div class="sourceCode" id="cb130"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">temp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"data/data.csv"</span><span class="op">)</span></span>
<span><span class="co"># R 默认按照数值或字母先后顺序排序，因此这里不需要设定 levels</span></span>
<span><span class="co"># 但是其他离散的分类变量，一定要检查顺序对不对，设定好 levels</span></span>
<span><span class="va">temp</span><span class="op">$</span><span class="va">year</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">temp</span><span class="op">$</span><span class="va">year</span><span class="op">)</span></span>
<span><span class="va">temp</span><span class="op">$</span><span class="va">age</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">temp</span><span class="op">$</span><span class="va">age</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>在 data.csv 中选择年龄标准化患病率数据，然后生成一列变量 se(标准误）。提示：根据正态性假设，标准误与区间存在以下关系： se=（区间上限-区间下限） /（2*1.96）。</li>
</ul>
<div class="sourceCode" id="cb131"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">temp</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">age</span> <span class="op">==</span> <span class="st">'Age-standardized'</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>se <span class="op">=</span> <span class="op">(</span><span class="va">upper</span><span class="op">-</span> <span class="va">lower</span><span class="op">)</span><span class="op">/</span><span class="op">(</span><span class="fl">1.96</span><span class="op">*</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## # A tibble: 360 × 11
##   measure    location sex    age     cause metric year 
##   &lt;chr&gt;      &lt;chr&gt;    &lt;chr&gt;  &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;fct&gt;
## 1 Prevalence Global   Male   Age-st… HIV/… Perce… 1990 
## 2 Prevalence Global   Female Age-st… HIV/… Perce… 1990 
## 3 Prevalence Global   Both   Age-st… HIV/… Perce… 1990 
## 4 Prevalence Global   Male   Age-st… HIV/… Rate   1990 
## 5 Prevalence Global   Female Age-st… HIV/… Rate   1990 
## 6 Prevalence Global   Both   Age-st… HIV/… Rate   1990 
## # … with 354 more rows, and 4 more variables:
## #   val &lt;dbl&gt;, upper &lt;dbl&gt;, lower &lt;dbl&gt;, se &lt;dbl&gt;</code></pre>
<ul>
<li>在 data.csv 中生成年龄组变量（5 年间隔），如果年份在 1990 年到 1994年之间，生成 year2 为”year:1990-94”；如果年份在 1995 年到 1999 年之间，生成”year:1995-99”, 以此类推。提示：使用 ifelse(test,yes,no) 函数。</li>
</ul>
<div class="sourceCode" id="cb133"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## 方法一，用 ifelse：</span></span>
<span><span class="va">temp</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>year2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">year</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1990</span><span class="op">:</span><span class="fl">1994</span><span class="op">)</span>,<span class="st">"year:1990_94"</span>,</span>
<span>                        <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">year</span><span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1995</span><span class="op">:</span><span class="fl">1999</span><span class="op">)</span>,<span class="st">"year:1995_99"</span>,</span>
<span>                        <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">year</span><span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2000</span><span class="op">:</span><span class="fl">2004</span><span class="op">)</span>,<span class="st">"year:2000_04"</span>,</span>
<span>                        <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">year</span><span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2005</span><span class="op">:</span><span class="fl">2009</span><span class="op">)</span>,<span class="st">"year:2005_09"</span>,</span>
<span>                        <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">year</span><span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2010</span><span class="op">:</span><span class="fl">2014</span><span class="op">)</span>,<span class="st">"year:2010_14"</span>,</span>
<span>                                     <span class="st">"year:2015_19"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## # A tibble: 900 × 11
##   measure    location sex    age     cause metric year 
##   &lt;chr&gt;      &lt;chr&gt;    &lt;chr&gt;  &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;fct&gt;
## 1 Prevalence Global   Male   All ag… HIV/… Number 1990 
## 2 Prevalence Global   Female All ag… HIV/… Number 1990 
## 3 Prevalence Global   Both   All ag… HIV/… Number 1990 
## 4 Prevalence Global   Male   All ag… HIV/… Perce… 1990 
## 5 Prevalence Global   Female All ag… HIV/… Perce… 1990 
## 6 Prevalence Global   Both   All ag… HIV/… Perce… 1990 
## # … with 894 more rows, and 4 more variables:
## #   val &lt;dbl&gt;, upper &lt;dbl&gt;, lower &lt;dbl&gt;, year2 &lt;chr&gt;</code></pre>
<div class="sourceCode" id="cb135"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## 方法二，用 case_when:</span></span>
<span><span class="va">temp</span> <span class="op">&lt;-</span> <span class="va">temp</span> <span class="op">|&gt;</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>year2<span class="op">=</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span><span class="va">year</span><span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1990</span><span class="op">:</span><span class="fl">1994</span><span class="op">)</span><span class="op">~</span><span class="st">"year:1990_94"</span>,</span>
<span>                       <span class="va">year</span><span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1995</span><span class="op">:</span><span class="fl">1999</span><span class="op">)</span><span class="op">~</span><span class="st">"year:1995_99"</span>,</span>
<span>                       <span class="va">year</span><span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2000</span><span class="op">:</span><span class="fl">2004</span><span class="op">)</span><span class="op">~</span><span class="st">"year:2000_04"</span>,</span>
<span>                       <span class="va">year</span><span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2005</span><span class="op">:</span><span class="fl">2009</span><span class="op">)</span><span class="op">~</span><span class="st">"year:2005_09"</span>,</span>
<span>                       <span class="va">year</span><span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2010</span><span class="op">:</span><span class="fl">2014</span><span class="op">)</span><span class="op">~</span><span class="st">"year:2010_14"</span>,</span>
<span>                       <span class="va">year</span><span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2015</span><span class="op">:</span><span class="fl">2019</span><span class="op">)</span><span class="op">~</span><span class="st">"year:2015_19"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb136"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">####### 正常计算OR #############</span></span>
<span><span class="co">#       患病  不患病</span></span>
<span><span class="co">#暴露     80     30</span></span>
<span><span class="co">#非暴露   20     70</span></span>
<span><span class="co">#       患病  不患病</span></span>
<span><span class="co">#暴露     0.8     0.3</span></span>
<span><span class="co">#非暴露   0.2     0.7</span></span>
<span><span class="co"># 患病暴露比（odds） 0.8/0.2</span></span>
<span><span class="co"># 不患病暴露比（odds） 0.3/0.7</span></span>
<span><span class="co"># 计算OR值 (0.8/0.2)/(0.3/0.7)=9.33</span></span>
<span><span class="co">#### 转换成logisttic计算 #######</span></span>
<span><span class="co">#  y患病=1，不患病=0</span></span>
<span><span class="co">#  x暴露=1，不暴露=0</span></span>
<span><span class="co">## 由于是二分类变量 1-p(y=1)=p(y=0)</span></span>
<span><span class="co">#       患病      不患病</span></span>
<span><span class="co">#暴露     p(y=1)  p(y=0)</span></span>
<span><span class="co">#非暴露  p'(y=1)  p'(y=0)</span></span>
<span><span class="co">## (1)OR = [p(y=1)/p'(y=1)]/[(p(y=0)/p'(y=0))]=[p(y=1)/p(y=0)]/[p'(y=1)/p'(y=0)]</span></span>
<span><span class="co">##    构建logistic方程 ln [P(y=1)/(1-P(y=1))] = bx+d  </span></span>
<span><span class="co">##    推出P(y=1)/(1-P(y=1))=P(y=1)/P(y=0)=exp(b*x+d)</span></span>
<span><span class="co">## (2)暴露组 p(y=1)/p(y=0) = exp(b*1+d)</span></span>
<span><span class="co">## (3)非暴露组 p'(y=1)/p'(y=0) = exp(b*0+d)=exp(d)</span></span>
<span><span class="co">## 根据(1)推导代入(2)(3)得到</span></span>
<span><span class="co">## OR=exp(b*1+d)/exp(d)=exp(b)</span></span>
<span><span class="co">########### R语言模拟程序  ###########</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">80</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">20</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">30</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">70</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">0</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">100</span>,<span class="fl">100</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">x</span>,<span class="va">y</span><span class="op">)</span></span>
<span><span class="va">df</span><span class="op">$</span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">y</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">df</span><span class="op">$</span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">x</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">df2</span> <span class="op">&lt;-</span> <span class="va">df</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">df2</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"暴露"</span>,<span class="st">"患病"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">df2</span><span class="op">)</span></span></code></pre></div>
<pre><code>##     患病
## 暴露  0  1
##    0 70 20
##    1 30 80</code></pre>
<div class="sourceCode" id="cb138"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="fl">0.8</span><span class="op">/</span><span class="fl">0.2</span><span class="op">)</span><span class="op">/</span><span class="op">(</span><span class="fl">0.3</span><span class="op">/</span><span class="fl">0.7</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 9.333</code></pre>
<div class="sourceCode" id="cb140"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">x</span>,<span class="va">df</span><span class="op">$</span><span class="va">y</span><span class="op">)</span></span></code></pre></div>
<pre><code>##    
##      0  1
##   0 70 20
##   1 30 80</code></pre>
<div class="sourceCode" id="cb142"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span><span class="op">(</span><span class="va">y</span><span class="op">~</span><span class="va">x</span>,data <span class="op">=</span> <span class="va">df</span>,family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html">binomial</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## 
## Call:  glm(formula = y ~ x, family = binomial(), data = df)
## 
## Coefficients:
## (Intercept)           x1  
##       -1.25         2.23  
## 
## Degrees of Freedom: 199 Total (i.e. Null);  198 Residual
## Null Deviance:       277 
## Residual Deviance: 224   AIC: 228</code></pre>
<div class="sourceCode" id="cb144"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="fl">9.333</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 2.234</code></pre>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="index.html">前言</a></div>
<div class="empty"></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#base_r%E5%9F%BA%E7%A1%80"><span class="header-section-number">1</span> Base_R基础</a></li>
<li><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E6%8B%BE%E9%81%97"><span class="header-section-number">1.1</span> 基础拾遗</a></li>
<li>
<a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="header-section-number">1.2</span> 数据基本操作</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE"><span class="header-section-number">1.2.1</span> 读取数据</a></li>
<li><a class="nav-link" href="#%E9%80%89%E6%8B%A9%E6%95%B0%E6%8D%AE"><span class="header-section-number">1.2.2</span> 选择数据</a></li>
<li><a class="nav-link" href="#%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE"><span class="header-section-number">1.2.3</span> 保存数据</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="header-section-number">1.3</span> 数据类型与数据结构</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="header-section-number">1.3.1</span> 常见的数据类型</a></li>
<li><a class="nav-link" href="#%E7%89%B9%E6%AE%8A%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-naninf-na-null"><span class="header-section-number">1.3.2</span> 特殊数据类型： NaN,Inf， NA， NULL</a></li>
<li><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%BD%AC%E6%8D%A2-as.type"><span class="header-section-number">1.3.3</span> 数据类型的转换 as.type()</a></li>
<li><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="header-section-number">1.3.4</span> 数据结构</a></li>
</ul>
</li>
<li><a class="nav-link" href="#%E4%BD%9C%E4%B8%9A"><span class="header-section-number">1.4</span> 作业</a></li>
<li>
<a class="nav-link" href="#%E5%87%BD%E6%95%B0"><span class="header-section-number">1.5</span> 函数</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E7%9A%84%E7%BB%93%E6%9E%84"><span class="header-section-number">1.5.1</span> 函数的结构</a></li>
<li><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E7%9A%84%E5%8A%9F%E8%83%BD"><span class="header-section-number">1.5.2</span> 函数的功能</a></li>
<li><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E7%9A%84%E5%88%86%E7%B1%BB"><span class="header-section-number">1.5.3</span> 函数的分类</a></li>
<li><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%87%BD%E6%95%B0%E5%B8%AE%E5%8A%A9"><span class="header-section-number">1.5.4</span> 查看函数帮助</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#%E5%90%91%E9%87%8F%E5%8F%8A%E5%85%B6%E6%93%8D%E4%BD%9C"><span class="header-section-number">1.6</span> 向量及其操作</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%90%91%E9%87%8F"><span class="header-section-number">1.6.1</span> 创建向量</a></li>
<li><a class="nav-link" href="#%E5%90%91%E9%87%8F%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="header-section-number">1.6.2</span> 向量的类型</a></li>
<li><a class="nav-link" href="#%E5%90%91%E9%87%8F%E7%9A%84%E8%BF%90%E7%AE%97"><span class="header-section-number">1.6.3</span> 向量的运算</a></li>
<li><a class="nav-link" href="#%E9%87%8D%E8%A6%81%E5%90%91%E9%87%8F%E7%9A%84%E5%BE%AA%E7%8E%AF%E8%A1%A5%E9%BD%90%E6%9C%BA%E5%88%B6"><span class="header-section-number">1.6.4</span> 重要：向量的循环补齐机制</a></li>
<li><a class="nav-link" href="#%E4%BA%A4%E5%B9%B6%E8%A1%A5"><span class="header-section-number">1.6.5</span> 交、并、补</a></li>
<li><a class="nav-link" href="#%E5%90%91%E9%87%8F%E7%9A%84%E4%B8%8B%E6%A0%87%E7%B4%A2%E5%BC%95"><span class="header-section-number">1.6.6</span> 向量的下标索引 []</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E6%A1%86%E5%8F%8A%E5%85%B6%E6%93%8D%E4%BD%9C"><span class="header-section-number">1.7</span> 数据框及其操作</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%E7%94%9F%E6%88%90%E6%95%B0%E6%8D%AE%E6%A1%86"><span class="header-section-number">1.7.1</span> 生成数据框</a></li>
<li><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E6%A1%86%E7%9A%84%E4%B8%8B%E6%A0%87%E7%B4%A2%E5%BC%95"><span class="header-section-number">1.7.2</span> 数据框的下标索引 \[ , \]</a></li>
<li><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E6%A1%86%E5%A6%82%E4%BD%95%E7%94%9F%E6%88%90%E6%96%B0%E7%9A%84%E5%88%97"><span class="header-section-number">1.7.3</span> 数据框如何生成新的列</a></li>
</ul>
</li>
<li><a class="nav-link" href="#%E4%BD%9C%E4%B8%9A-1"><span class="header-section-number">1.8</span> 作业</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/yanghongXXL/GBD_learning/blob/master/01_%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/yanghongXXL/GBD_learning/edit/master/01_%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>GBD 笔记总结</strong>" was written by 杨 弘. It was last built on 2022-11-10.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
